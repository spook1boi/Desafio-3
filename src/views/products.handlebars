<!DOCTYPE html>
<html>
<head>
    <title>Lista de Productos</title>
</head>
<body>
    <h1>Lista de Productos</h1>
    {{#each products}}
    <div class="product-item">
        <h2>{{this.title}}</h2>
        <p>Precio: ${{this.price}}</p>
        <p>Categoría: {{this.category}}</p>
        <button class="add-to-cart" data-product-id="{{this._id}}">Agregar al carrito</button>
        <a href="/products/{{this._id}}">Ver detalles</a>
    </div>
    {{/each}}
    <div id="cart-view">
        <!-- Vista del carrito -->
    </div>
    <script>
        const addToCartButtons = document.querySelectorAll('.add-to-cart');
        const cart = [];

        addToCartButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                const productId = event.target.getAttribute('data-product-id');
                // Simulamos la adición del producto al carrito
                cart.push({ productId, quantity: 1 });

                // Actualizamos la vista del carrito
                updateCartView(cart);
            });
        });

        // Función para actualizar la vista del carrito
        function updateCartView(cart) {
            const cartView = document.getElementById('cart-view');
            cartView.innerHTML = '<h2>Carrito de Compras</h2>';
            cart.forEach(item => {
                cartView.innerHTML += `<p>Producto: ${item.productId}, Cantidad: ${item.quantity}</p>`;
            });
        }
    </script>
</body>
</html>